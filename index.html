<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üíï –î–ª—è —Ç–µ–±—è, –ª—é–±–∏–º–∞—è</title>
    
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&family=Pacifico&family=Caveat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link rel="stylesheet" href="css/menu.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/profile-new.css">
    <link rel="stylesheet" href="css/features.css">
    <link rel="stylesheet" href="css/icons.css">
</head>
<body>

    <!-- ===== FLOATING EFFECTS ===== -->
    <div class="floating-hearts" id="floatingHearts"></div>
    <div class="sparkle-container" id="sparkleContainer"></div>

    <!-- ===== TOAST ===== -->
    <div class="toast" id="toast">
        <span class="toast-icon">üíï</span>
        <span id="toastText">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</span>
    </div>

    <!-- ===== SIDE MENU OVERLAY ===== -->
    <div class="side-menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>

    <!-- ===== SIDE MENU ===== -->
    <div class="side-menu" id="sideMenu">
        <div class="menu-header">
            <div class="menu-avatar" id="menuAvatar">üë∏</div>
            <div class="menu-user-name" id="menuUserName">–õ—é–±–∏–º–∞—è üíï</div>
            <div class="menu-user-status" id="menuUserStatus">–í —Å–µ—Ç–∏ ‚Ä¢ –°–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è</div>
            <div class="menu-role-badge" id="menuRoleBadge">–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞</div>
        </div>
        <div class="menu-section">
            <div class="menu-section-title">–ì–ª–∞–≤–Ω–æ–µ</div>
            <div class="menu-item active" data-page="home" onclick="navigateTo('home')">
                <div class="menu-item-icon pink">üè†</div>
                <span class="menu-item-text">–ì–ª–∞–≤–Ω–∞—è</span>
            </div>
            <div class="menu-item" data-page="calendar" onclick="navigateTo('calendar')">
                <div class="menu-item-icon lilac">üìÖ</div>
                <span class="menu-item-text">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
                <span class="menu-item-badge" id="calendarBadge">2</span>
            </div>
            <div class="menu-item" data-page="letters" onclick="navigateTo('letters')">
                <div class="menu-item-icon peach">üíå</div>
                <span class="menu-item-text">–õ—é–±–æ–≤–Ω—ã–µ –ø–∏—Å—å–º–∞</span>
                <span class="menu-item-badge" id="lettersBadge">0</span>
            </div>
            <div class="menu-item" data-page="profile" onclick="navigateTo('profile')">
                <div class="menu-item-icon gold">üë§</div>
                <span class="menu-item-text">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </div>
        </div>
        <div class="menu-divider"></div>
        <div class="menu-section">
            <div class="menu-section-title">–ü—Ä–∞–∑–¥–Ω–∏–∫–∏</div>
            <div class="menu-item" onclick="navigateTo('calendar'); toggleMenu();">
                <div class="menu-item-icon coral">üíù</div>
                <span class="menu-item-text">14 –§–µ–≤—Ä–∞–ª—è</span>
            </div>
            <div class="menu-item" onclick="navigateTo('calendar'); toggleMenu();">
                <div class="menu-item-icon gold">üå∑</div>
                <span class="menu-item-text">8 –ú–∞—Ä—Ç–∞</span>
            </div>
        </div>
        <div class="menu-divider"></div>
        <div class="menu-section">
            <div class="menu-section-title">–ï—â—ë</div>
            <div class="menu-item" data-page="gallery" onclick="navigateTo('gallery')">
                <div class="menu-item-icon pink">üì∏</div>
                <span class="menu-item-text">–§–æ—Ç–æ–∞–ª—å–±–æ–º—ã</span>
            </div>
            <div class="menu-item" data-page="gifts" onclick="navigateTo('gifts')">
                <div class="menu-item-icon lilac">üéÅ</div>
                <span class="menu-item-text">–ü–æ–¥–∞—Ä–∫–∏</span>
            </div>
            <div class="menu-item" id="adminMenuBtn" style="display:none;" data-page="admin" onclick="navigateTo('admin')">
                <div class="menu-item-icon mint">‚öôÔ∏è</div>
                <span class="menu-item-text">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
            </div>
        </div>
        <div class="menu-footer">
            <p>–°–¥–µ–ª–∞–Ω–æ —Å üíï</p>
            <div class="role-switcher" onclick="switchRole()">
                <span id="roleSwitchLabel">üîë –í–æ–π—Ç–∏ –∫–∞–∫ –ê–¥–º–∏–Ω</span>
            </div>
        </div>
    </div>

    <!-- ===== MODAL ===== -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modalContent">
            <button class="modal-close" onclick="closeModal()">‚úï</button>
            <span class="modal-emoji" id="modalEmoji">üíù</span>
            <h2 id="modalTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫</h2>
            <p id="modalText">–¢–µ–∫—Å—Ç</p>
            <button class="modal-btn" onclick="closeModal()">–ü–æ–Ω—è—Ç–Ω–æ! üíï</button>
        </div>
    </div>

    <!-- ===== MAIN CONTAINER ===== -->
    <div class="app-container" id="appContainer">

        <!-- ===== PAGE: HOME ===== -->
        <div class="page active" id="page-home">
            <header class="header">
                <div class="header-top">
                    <div class="user-info" onclick="toggleMenu()">
                        <div class="avatar">
                            <div class="avatar-ring"></div>
                            <span id="headerAvatar">üë∏</span>
                        </div>
                        <div>
                            <div class="user-name" id="headerUserName">–ü—Ä–∏–≤–µ—Ç, –õ—é–±–∏–º–∞—è!</div>
                            <div class="user-greeting">–°–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å üå∏</div>
                        </div>
                    </div>
                    <div class="header-actions">
                        <div class="header-btn" onclick="openNotifications()">
                            üîî
                            <div class="notification-badge" id="notifBadge">0</div>
                        </div>
                        <div class="header-btn" onclick="toggleMenu()">‚ò∞</div>
                    </div>
                </div>
                <div class="header-title">
                    <h1>–ú–æ–π –º–∏—Ä ‚Äî —ç—Ç–æ —Ç—ã üíï</h1>
                    <div class="header-subtitle">–ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å —Ç–æ–±–æ–π ‚Äî –ø—Ä–∞–∑–¥–Ω–∏–∫</div>
                </div>
            </header>

            <!-- Countdown -->
            <div class="countdown-banner animate-in delay-1">
                <div class="countdown-label" id="countdownLabel">
                    <span class="event-icon">üíù</span> –î–æ 14 –§–µ–≤—Ä–∞–ª—è –æ—Å—Ç–∞–ª–æ—Å—å <span class="event-icon">üíù</span>
                </div>
                <div class="countdown-grid">
                    <div class="countdown-item">
                        <div class="countdown-number" id="days">00</div>
                        <div class="countdown-unit">–¥–Ω–µ–π</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-number" id="hours">00</div>
                        <div class="countdown-unit">—á–∞—Å–æ–≤</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-number" id="minutes">00</div>
                        <div class="countdown-unit">–º–∏–Ω—É—Ç</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-number" id="seconds">00</div>
                        <div class="countdown-unit">—Å–µ–∫—É–Ω–¥</div>
                    </div>
                </div>
            </div>

            <!-- Theme Pills -->
            <div class="section-title animate-in delay-2">
                <h2>üéÄ –ü—Ä–∞–∑–¥–Ω–∏–∫–∏</h2>
            </div>
            <div class="theme-pills animate-in delay-2">
                <div class="theme-pill active" onclick="switchHoliday('valentine', this)">üíù 14 –§–µ–≤—Ä–∞–ª—è</div>
                <div class="theme-pill" onclick="switchHoliday('march8', this)">üå∑ 8 –ú–∞—Ä—Ç–∞</div>
                <div class="theme-pill" onclick="switchHoliday('birthday', this)">üéÇ –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</div>
                <div class="theme-pill" onclick="switchHoliday('anniversary', this)">üíç –ì–æ–¥–æ–≤—â–∏–Ω–∞</div>
            </div>

            <!-- Mini Calendar Preview -->
            <div class="section-title animate-in delay-2">
                <h2>üìÖ –ë–ª–∏–∂–∞–π—à–∏–µ –¥–∞—Ç—ã</h2>
                <span class="see-all" onclick="navigateTo('calendar')">–ö–∞–ª–µ–Ω–¥–∞—Ä—å ‚Üí</span>
            </div>
            <div class="upcoming-events animate-in delay-2" id="upcomingEvents">
                <!-- Generated by JS -->
            </div>

            <!-- Daily Compliment -->
            <div class="section-title animate-in delay-3">
                <h2>‚ú® –ö–æ–º–ø–ª–∏–º–µ–Ω—Ç –¥–Ω—è</h2>
                <span class="see-all" onclick="newCompliment()">–û–±–Ω–æ–≤–∏—Ç—å</span>
            </div>
            <div class="daily-compliment animate-in delay-3" onclick="newCompliment()">
                <div class="compliment-label">üí´ –ö–æ–º–ø–ª–∏–º–µ–Ω—Ç –¥–Ω—è</div>
                <div class="compliment-text" id="complimentText">–¢—ã –æ—Å–≤–µ—â–∞–µ—à—å –º–æ–π –º–∏—Ä —è—Ä—á–µ, —á–µ–º —Ç—ã—Å—è—á–∞ –∑–≤—ë–∑–¥ ‚≠ê</div>
                <div class="compliment-refresh">üîÑ –ù–∞–∂–º–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ</div>
            </div>

            <!-- Love Cards -->
            <div class="section-title animate-in delay-3">
                <h2>üíï –î–ª—è —Ç–µ–±—è</h2>
            </div>
            <div class="cards-slider animate-in delay-3">
                <div class="love-card" onclick="navigateTo('letters')">
                    <span class="card-emoji">üíå</span>
                    <div class="card-title">–ü–∏—Å—å–º–∞ –ª—é–±–≤–∏</div>
                    <div class="card-desc">–ß–∏—Ç–∞–π –∏ –æ—Ç–≤–µ—á–∞–π –Ω–∞ –ø–∏—Å—å–º–∞</div>
                    <div class="card-action">–û—Ç–∫—Ä—ã—Ç—å ‚Üí</div>
                </div>
                <div class="love-card" onclick="navigateTo('gifts')">
                    <span class="card-emoji">üéÅ</span>
                    <div class="card-title">–ü–æ–¥–∞—Ä–∫–∏</div>
                    <div class="card-desc">–°–º–æ—Ç—Ä–∏ —Å–≤–æ–∏ –ø–æ–¥–∞—Ä–æ—á–∫–∏!</div>
                    <div class="card-action">–û—Ç–∫—Ä—ã—Ç—å ‚Üí</div>
                </div>
                <div class="love-card" onclick="navigateTo('gallery')">
                    <span class="card-emoji">üì∏</span>
                    <div class="card-title">–ù–∞—à–∏ —Ñ–æ—Ç–æ</div>
                    <div class="card-desc">–§–æ—Ç–æ–∞–ª—å–±–æ–º—ã –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π</div>
                    <div class="card-action">–°–º–æ—Ç—Ä–µ—Ç—å ‚Üí</div>
                </div>
                <div class="love-card" onclick="openModal('üíã','–ö—É–ø–æ–Ω—ã –ª—é–±–≤–∏','–ö—É–ø–æ–Ω –Ω–∞: –æ–±–Ω–∏–º–∞—à–∫–∏, –∑–∞–≤—Ç—Ä–∞–∫, –º–∞—Å—Å–∞–∂! üéüÔ∏è')">
                    <span class="card-emoji">üíã</span>
                    <div class="card-title">–ö—É–ø–æ–Ω—ã –ª—é–±–≤–∏</div>
                    <div class="card-desc">–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã</div>
                    <div class="card-action">–ü–æ–ª—É—á–∏—Ç—å ‚Üí</div>
                </div>
            </div>

            <!-- Love Meter -->
            <div class="section-title animate-in delay-4"><h2>üíó –£—Ä–æ–≤–µ–Ω—å –ª—é–±–≤–∏</h2></div>
            <div class="love-meter animate-in delay-4">
                <div class="meter-title">
                    <h3>–®–∫–∞–ª–∞ –æ–±–æ–∂–∞–Ω–∏—è</h3>
                    <div class="meter-value" id="meterPercent">0%</div>
                </div>
                <div class="meter-bar"><div class="meter-fill" id="meterFill"></div></div>
                <div class="meter-milestones">
                    <span class="milestone reached">üíï –õ—é–±–ª—é</span>
                    <span class="milestone reached">üòç –û–±–æ–∂–∞—é</span>
                    <span class="milestone reached">ü§Ø –ë–µ–∑—É–º–Ω–æ</span>
                    <span class="milestone reached">‚àû –ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ</span>
                </div>
            </div>

            <!-- Mood -->
            <div class="section-title animate-in delay-4"><h2>üåà –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</h2></div>
            <div class="mood-section animate-in delay-4">
                <div class="mood-question">–ö–∞–∫ —Ç—ã —Å–µ–≥–æ–¥–Ω—è? ü§î</div>
                <div class="mood-options">
                    <button class="mood-btn" onclick="selectMood(this,'–¢—ã —Å—á–∞—Å—Ç–ª–∏–≤–∞, –∏ —è —Ç–æ–∂–µ! ü•≥')">üòä</button>
                    <button class="mood-btn" onclick="selectMood(this,'–¢—ã –≤–ª—é–±–ª–µ–Ω–∞? –Ø —Ç–æ–∂–µ! üíï')">ü•∞</button>
                    <button class="mood-btn" onclick="selectMood(this,'–û—Ç–ø—Ä–∞–≤–ª—è—é –æ–±–Ω–∏–º–∞—à–∫–∏! ü§ó')">üò¥</button>
                    <button class="mood-btn" onclick="selectMood(this,'–°–µ–π—á–∞—Å —Ä–∞—Å—Å–º–µ—à—É! ü§™')">üò¢</button>
                    <button class="mood-btn" onclick="selectMood(this,'–¢—ã –∫–æ—Ä–æ–ª–µ–≤–∞! üëë')">ü§©</button>
                </div>
                <div class="mood-response" id="moodResponse"></div>
            </div>

            <div style="height:30px"></div>
        </div>

        <!-- ===== PAGE: CALENDAR ===== -->
        <div class="page" id="page-calendar">
            <div class="page-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Äπ</button>
                <h1 class="page-title">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ª—é–±–≤–∏</h1>
                <div class="page-header-action" id="calAddBtn" style="display:none;" onclick="openAddEventModal()">+</div>
            </div>

            <!-- Calendar Tabs -->
            <div class="cal-tabs">
                <div class="cal-tab active" onclick="switchCalTab('month', this)">–ú–µ—Å—è—Ü</div>
                <div class="cal-tab" onclick="switchCalTab('events', this)">–í—Å–µ —Å–æ–±—ã—Ç–∏—è</div>
                <div class="cal-tab" onclick="switchCalTab('special', this)">–ü—Ä–∞–∑–¥–Ω–∏–∫–∏</div>
            </div>

            <!-- Calendar Month View -->
            <div class="cal-view active" id="calView-month">
                <div class="calendar-wrapper">
                    <div class="calendar">
                        <div class="calendar-header">
                            <button class="calendar-nav" onclick="changeMonth(-1)">‚Äπ</button>
                            <div class="calendar-month" id="calendarMonth">–§–µ–≤—Ä–∞–ª—å <span>2025</span></div>
                            <button class="calendar-nav" onclick="changeMonth(1)">‚Ä∫</button>
                        </div>
                        <div class="calendar-weekdays">
                            <div class="weekday">–ü–Ω</div><div class="weekday">–í—Ç</div>
                            <div class="weekday">–°—Ä</div><div class="weekday">–ß—Ç</div>
                            <div class="weekday">–ü—Ç</div><div class="weekday">–°–±</div>
                            <div class="weekday">–í—Å</div>
                        </div>
                        <div class="calendar-days" id="calendarDays"></div>
                        <div class="event-legend">
                            <div class="legend-item"><div class="legend-dot today-dot"></div><span>–°–µ–≥–æ–¥–Ω—è</span></div>
                            <div class="legend-item"><div class="legend-dot special-dot"></div><span>–ü—Ä–∞–∑–¥–Ω–∏–∫</span></div>
                            <div class="legend-item"><div class="legend-dot event-dot"></div><span>–°–æ–±—ã—Ç–∏–µ</span></div>
                            <div class="legend-item"><div class="legend-dot meeting-dot"></div><span>–í—Å—Ç—Ä–µ—á–∞</span></div>
                        </div>
                    </div>
                </div>

                <!-- Selected Day Details -->
                <div class="day-details" id="dayDetails" style="display:none;">
                    <div class="day-details-header">
                        <h3 id="dayDetailsTitle">14 –§–µ–≤—Ä–∞–ª—è</h3>
                        <span class="day-details-close" onclick="closeDayDetails()">‚úï</span>
                    </div>
                    <div class="day-details-content" id="dayDetailsContent"></div>
                </div>
            </div>

            <!-- Calendar Events View -->
            <div class="cal-view" id="calView-events">
                <div class="events-list" id="eventsList"></div>
            </div>

            <!-- Calendar Special View -->
            <div class="cal-view" id="calView-special">
                <div class="special-dates-list" id="specialDatesList"></div>
            </div>
        </div>

        <!-- ===== PAGE: LETTERS ===== -->
        <div class="page" id="page-letters">
            <div class="page-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Äπ</button>
                <h1 class="page-title">üíå –õ—é–±–æ–≤–Ω—ã–µ –ø–∏—Å—å–º–∞</h1>
                <div class="page-header-action" id="letterAddBtn" style="display:none;" onclick="openWriteLetterModal()">‚úèÔ∏è</div>
            </div>

            <div class="letters-tabs">
                <div class="letter-tab active" onclick="switchLetterTab('inbox', this)">üì• –í—Ö–æ–¥—è—â–∏–µ</div>
                <div class="letter-tab" onclick="switchLetterTab('sent', this)">üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ</div>
            </div>

            <div class="letters-container" id="lettersInbox"></div>
            <div class="letters-container" id="lettersSent" style="display:none;"></div>

            <!-- Letter Detail View -->
            <div class="letter-detail" id="letterDetail" style="display:none;">
                <div class="letter-detail-paper">
                    <div class="letter-detail-close" onclick="closeLetterDetail()">‚úï</div>
                    <div class="letter-detail-date" id="letterDetailDate"></div>
                    <div class="letter-detail-from" id="letterDetailFrom"></div>
                    <div class="letter-detail-body" id="letterDetailBody"></div>

                    <!-- Sticker Reactions -->
                    <div class="letter-reactions" id="letterReactions"></div>
                    <div class="reaction-bar">
                        <span class="reaction-label">–†–µ–∞–∫—Ü–∏—è:</span>
                        <div class="reaction-stickers">
                            <span class="reaction-sticker" onclick="reactToLetter('‚ù§Ô∏è')">‚ù§Ô∏è</span>
                            <span class="reaction-sticker" onclick="reactToLetter('üòç')">üòç</span>
                            <span class="reaction-sticker" onclick="reactToLetter('ü•∞')">ü•∞</span>
                            <span class="reaction-sticker" onclick="reactToLetter('üò≠')">üò≠</span>
                            <span class="reaction-sticker" onclick="reactToLetter('üíã')">üíã</span>
                            <span class="reaction-sticker" onclick="reactToLetter('ü¶ã')">ü¶ã</span>
                            <span class="reaction-sticker" onclick="reactToLetter('‚ú®')">‚ú®</span>
                            <span class="reaction-sticker" onclick="reactToLetter('üå∏')">üå∏</span>
                        </div>
                    </div>

                    <!-- Reply -->
                    <div class="letter-reply-section">
                        <textarea class="letter-reply-input" id="letterReplyInput" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–≤–µ—Ç... üíï"></textarea>
                        <button class="letter-reply-btn" onclick="sendReply()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å üíå</button>
                    </div>

                    <!-- Replies Thread -->
                    <div class="letter-replies" id="letterReplies"></div>
                </div>
            </div>
        </div>

        <!-- ===== PAGE: PROFILE ===== -->
        <div class="page" id="page-profile">
            <div class="page-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Äπ</button>
                <h1 class="page-title">üë§ –ü—Ä–æ—Ñ–∏–ª—å</h1>
                <div class="page-header-action" onclick="openEditProfileModal()">‚úèÔ∏è</div>
            </div>

            <div class="profile-card">
                <div class="profile-avatar-large" id="profileAvatar">üë∏</div>
                <div class="profile-name" id="profileName">–õ—é–±–∏–º–∞—è</div>
                <div class="profile-role" id="profileRole">üíï –ü—Ä–∏–Ω—Ü–µ—Å—Å–∞</div>
                <div class="profile-stats">
                    <div class="profile-stat">
                        <div class="stat-number" id="statLetters">0</div>
                        <div class="stat-label">–ü–∏—Å–µ–º</div>
                    </div>
                    <div class="profile-stat">
                        <div class="stat-number" id="statGifts">0</div>
                        <div class="stat-label">–ü–æ–¥–∞—Ä–∫–æ–≤</div>
                    </div>
                    <div class="profile-stat">
                        <div class="stat-number" id="statDays">0</div>
                        <div class="stat-label">–î–Ω–µ–π –≤–º–µ—Å—Ç–µ</div>
                    </div>
                </div>
            </div>

            <div class="profile-sections">
                <div class="profile-section-item" onclick="navigateTo('gallery')">
                    <div class="psi-icon">üì∏</div>
                    <div class="psi-text">
                        <h3>–§–æ—Ç–æ–∞–ª—å–±–æ–º—ã</h3>
                        <p>–ù–∞—à–∏ –ª—É—á—à–∏–µ –º–æ–º–µ–Ω—Ç—ã</p>
                    </div>
                    <span class="psi-arrow">‚Ä∫</span>
                </div>
                <div class="profile-section-item" onclick="navigateTo('gifts')">
                    <div class="psi-icon">üéÅ</div>
                    <div class="psi-text">
                        <h3>–ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏</h3>
                        <p>–í—Å–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ–¥–∞—Ä–æ—á–∫–∏</p>
                    </div>
                    <span class="psi-arrow">‚Ä∫</span>
                </div>
                <div class="profile-section-item" onclick="navigateTo('letters')">
                    <div class="psi-icon">üíå</div>
                    <div class="psi-text">
                        <h3>–õ—é–±–æ–≤–Ω—ã–µ –ø–∏—Å—å–º–∞</h3>
                        <p>–í—Å–µ –Ω–∞—à–∏ –ø–µ—Ä–µ–ø–∏—Å–∫–∏</p>
                    </div>
                    <span class="psi-arrow">‚Ä∫</span>
                </div>
                <div class="profile-section-item" onclick="showToast('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–æ—Ä–æ! ‚öôÔ∏è')">
                    <div class="psi-icon">‚öôÔ∏è</div>
                    <div class="psi-text">
                        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <p>–¢–µ–º–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</p>
                    </div>
                    <span class="psi-arrow">‚Ä∫</span>
                </div>
            </div>

            <div class="profile-love-info">
                <div class="pli-title">üíï –ù–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è</div>
                <div class="pli-item">
                    <span>üìÖ –í–º–µ—Å—Ç–µ —Å:</span>
                    <strong id="togetherDate">14 —Ñ–µ–≤—Ä–∞–ª—è 2024</strong>
                </div>
                <div class="pli-item">
                    <span>üíù –î–Ω–µ–π –≤–º–µ—Å—Ç–µ:</span>
                    <strong id="togetherDays">365</strong>
                </div>
                <div class="pli-item">
                    <span>üíå –ü–∏—Å–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:</span>
                    <strong id="totalLetters">0</strong>
                </div>
            </div>
        </div>

        <!-- ===== PAGE: GALLERY ===== -->
        <div class="page" id="page-gallery">
            <div class="page-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Äπ</button>
                <h1 class="page-title">üì∏ –§–æ—Ç–æ–∞–ª—å–±–æ–º—ã</h1>
                <div class="page-header-action" id="galleryAddBtn" style="display:none;" onclick="openAddAlbumModal()">+</div>
            </div>
            <div class="albums-grid" id="albumsGrid"></div>
            <div class="album-photos-view" id="albumPhotosView" style="display:none;">
                <div class="album-photos-header">
                    <button class="back-btn" onclick="closeAlbumView()">‚Äπ</button>
                    <h2 id="albumViewTitle">–ê–ª—å–±–æ–º</h2>
                    <div class="page-header-action" id="albumAddPhotoBtn" style="display:none;" onclick="openAddPhotoModal()">üì∑</div>
                </div>
                <div class="album-photos-grid" id="albumPhotosGrid"></div>
            </div>
        </div>

        <!-- ===== PAGE: GIFTS ===== -->
        <div class="page" id="page-gifts">
            <div class="page-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Äπ</button>
                <h1 class="page-title">üéÅ –ü–æ–¥–∞—Ä–∫–∏</h1>
                <div class="page-header-action" id="giftAddBtn" style="display:none;" onclick="openSendGiftModal()">üéÅ</div>
            </div>

            <div class="gifts-balance" id="giftsBalance">
                <div class="balance-icon">‚≠ê</div>
                <div class="balance-info">
                    <div class="balance-label">–ë–∞–ª–∞–Ω—Å –∑–≤—ë–∑–¥</div>
                    <div class="balance-amount" id="balanceAmount">0</div>
                </div>
                <button class="balance-add-btn" id="balanceAddBtn" style="display:none;" onclick="openAddBalanceModal()">+ –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>

            <div class="gifts-tabs">
                <div class="gift-tab active" onclick="switchGiftTab('received', this)">üéÄ –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ</div>
                <div class="gift-tab" onclick="switchGiftTab('sent', this)" id="giftSentTab" style="display:none;">üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ</div>
            </div>

            <div class="gifts-list" id="giftsReceived"></div>
            <div class="gifts-list" id="giftsSent" style="display:none;"></div>
        </div>

        <!-- ===== PAGE: ADMIN ===== -->
        <div class="page" id="page-admin">
            <div class="page-header admin-header-bg">
                <button class="back-btn" onclick="navigateTo('home')">‚Äπ</button>
                <h1 class="page-title">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
            </div>

            <div class="admin-cards">
                <div class="admin-card" onclick="openAddEventModal()">
                    <div class="admin-card-icon">üìÖ</div>
                    <div class="admin-card-title">–î–æ–±–∞–≤–∏—Ç—å –¥–∞—Ç—É</div>
                    <div class="admin-card-desc">–ü—Ä–∞–∑–¥–Ω–∏–∫–∏, –≤—Å—Ç—Ä–µ—á–∏, —Å–æ–±—ã—Ç–∏—è</div>
                </div>
                <div class="admin-card" onclick="openWriteLetterModal()">
                    <div class="admin-card-icon">üíå</div>
                    <div class="admin-card-title">–ù–∞–ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ</div>
                    <div class="admin-card-desc">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ª—é–±–æ–≤–Ω–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ</div>
                </div>
                <div class="admin-card" onclick="openAddAlbumModal()">
                    <div class="admin-card-icon">üì∏</div>
                    <div class="admin-card-title">–°–æ–∑–¥–∞—Ç—å –∞–ª—å–±–æ–º</div>
                    <div class="admin-card-desc">–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ–∞–ª—å–±–æ–º</div>
                </div>
                <div class="admin-card" onclick="openSendGiftModal()">
                    <div class="admin-card-icon">üéÅ</div>
                    <div class="admin-card-title">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</div>
                    <div class="admin-card-desc">–ó–≤—ë–∑–¥—ã, –¥–µ–Ω—å–≥–∏, —Å—é—Ä–ø—Ä–∏–∑—ã</div>
                </div>
            </div>

            <div class="section-title"><h2>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏</h2></div>
            <div class="admin-events-list" id="adminEventsList"></div>

            <div class="section-title"><h2>üíå –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞</h2></div>
            <div class="admin-letters-list" id="adminLettersList"></div>

            <div class="section-title"><h2>üéÅ –ò—Å—Ç–æ—Ä–∏—è –ø–æ–¥–∞—Ä–∫–æ–≤</h2></div>
            <div class="admin-gifts-list" id="adminGiftsList"></div>
        </div>

    </div>

    <!-- ===== BOTTOM NAV ===== -->
    <nav class="bottom-nav" id="bottomNav">
        <div class="nav-item active" data-page="home" onclick="navigateTo('home')">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </div>
        <div class="nav-item" data-page="calendar" onclick="navigateTo('calendar')">
            <span class="nav-icon">üìÖ</span>
            <span class="nav-label">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
        </div>
        <div class="nav-center" onclick="launchConfetti(); openModal('üíù','–Ø —Ç–µ–±—è –ª—é–±–ª—é!','–¢—ã –ª—É—á—à–µ–µ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏! üíï‚ú®')">
            <div class="nav-center-btn">üíù</div>
        </div>
        <div class="nav-item" data-page="letters" onclick="navigateTo('letters')">
            <span class="nav-icon">üíå</span>
            <span class="nav-label">–ü–∏—Å—å–º–∞</span>
        </div>
        <div class="nav-item" data-page="profile" onclick="navigateTo('profile')">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
    </nav>

    <!-- ===== MODALS FOR ADMIN ===== -->
    <!-- Add Event Modal -->
    <div class="modal-overlay" id="addEventModal">
        <div class="modal modal-form">
            <button class="modal-close" onclick="closeAllModals()">‚úï</button>
            <h2>üìÖ –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</h2>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" id="eventTitle" placeholder="–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π —É–∂–∏–Ω..." class="form-input">
            </div>
            <div class="form-group">
                <label>–î–∞—Ç–∞</label>
                <input type="date" id="eventDate" class="form-input">
            </div>
            <div class="form-group">
                <label>–¢–∏–ø</label>
                <select id="eventType" class="form-input">
                    <option value="event">üìå –°–æ–±—ã—Ç–∏–µ</option>
                    <option value="meeting">ü§ù –í—Å—Ç—Ä–µ—á–∞</option>
                    <option value="holiday">üéâ –ü—Ä–∞–∑–¥–Ω–∏–∫</option>
                    <option value="date">üíï –°–≤–∏–¥–∞–Ω–∏–µ</option>
                    <option value="surprise">üéÅ –°—é—Ä–ø—Ä–∏–∑</option>
                </select>
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="eventDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è..." class="form-textarea"></textarea>
            </div>
            <div class="form-group">
                <label>–≠–º–æ–¥–∑–∏</label>
                <div class="emoji-picker">
                    <span class="ep-item" onclick="pickEventEmoji('üíï')">üíï</span>
                    <span class="ep-item" onclick="pickEventEmoji('üåπ')">üåπ</span>
                    <span class="ep-item" onclick="pickEventEmoji('üéÇ')">üéÇ</span>
                    <span class="ep-item" onclick="pickEventEmoji('üéâ')">üéâ</span>
                    <span class="ep-item" onclick="pickEventEmoji('üçΩÔ∏è')">üçΩÔ∏è</span>
                    <span class="ep-item" onclick="pickEventEmoji('üé¨')">üé¨</span>
                    <span class="ep-item" onclick="pickEventEmoji('‚úàÔ∏è')">‚úàÔ∏è</span>
                    <span class="ep-item" onclick="pickEventEmoji('üíé')">üíé</span>
                    <span class="ep-item" onclick="pickEventEmoji('üåÖ')">üåÖ</span>
                    <span class="ep-item" onclick="pickEventEmoji('üéÅ')">üéÅ</span>
                </div>
                <input type="hidden" id="eventEmoji" value="üíï">
            </div>
            <button class="modal-btn" onclick="saveEvent()">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ üìÖ</button>
        </div>
    </div>

    <!-- Write Letter Modal -->
    <div class="modal-overlay" id="writeLetterModal">
        <div class="modal modal-form">
            <button class="modal-close" onclick="closeAllModals()">‚úï</button>
            <h2>üíå –ù–∞–ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ</h2>
            <div class="form-group">
                <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" id="letterTitle" placeholder="–ú–æ—è –ª—é–±–∏–º–∞—è..." class="form-input">
            </div>
            <div class="form-group">
                <label>–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞</label>
                <textarea id="letterBody" placeholder="–ù–∞–ø–∏—à–∏ —Å–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞..." class="form-textarea large"></textarea>
            </div>
            <div class="form-group">
                <label>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–∏—Å—å–º–∞</label>
                <div class="emoji-picker">
                    <span class="ep-item" onclick="pickLetterMood('üíï')">üíï</span>
                    <span class="ep-item" onclick="pickLetterMood('üî•')">üî•</span>
                    <span class="ep-item" onclick="pickLetterMood('ü•∫')">ü•∫</span>
                    <span class="ep-item" onclick="pickLetterMood('üåô')">üåô</span>
                    <span class="ep-item" onclick="pickLetterMood('‚òÄÔ∏è')">‚òÄÔ∏è</span>
                    <span class="ep-item" onclick="pickLetterMood('ü¶ã')">ü¶ã</span>
                </div>
                <input type="hidden" id="letterMood" value="üíï">
            </div>
            <button class="modal-btn" onclick="sendLetter()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ üíå</button>
        </div>
    </div>

    <!-- Send Gift Modal -->
    <div class="modal-overlay" id="sendGiftModal">
        <div class="modal modal-form">
            <button class="modal-close" onclick="closeAllModals()">‚úï</button>
            <h2>üéÅ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</h2>
            <div class="gift-types-grid">
                <div class="gift-type-card" onclick="selectGiftType('stars', this)">
                    <span class="gtc-icon">‚≠ê</span>
                    <span class="gtc-name">–ó–≤—ë–∑–¥—ã</span>
                </div>
                <div class="gift-type-card" onclick="selectGiftType('flowers', this)">
                    <span class="gtc-icon">üíê</span>
                    <span class="gtc-name">–¶–≤–µ—Ç—ã</span>
                </div>
                <div class="gift-type-card" onclick="selectGiftType('ring', this)">
                    <span class="gtc-icon">üíç</span>
                    <span class="gtc-name">–ö–æ–ª—å—Ü–æ</span>
                </div>
                <div class="gift-type-card" onclick="selectGiftType('chocolate', this)">
                    <span class="gtc-icon">üç´</span>
                    <span class="gtc-name">–®–æ–∫–æ–ª–∞–¥</span>
                </div>
                <div class="gift-type-card" onclick="selectGiftType('bear', this)">
                    <span class="gtc-icon">üß∏</span>
                    <span class="gtc-name">–ú–∏—à–∫–∞</span>
                </div>
                <div class="gift-type-card" onclick="selectGiftType('money', this)">
                    <span class="gtc-icon">üí∞</span>
                    <span class="gtc-name">–î–µ–Ω—å–≥–∏</span>
                </div>
                <div class="gift-type-card" onclick="selectGiftType('heart', this)">
                    <span class="gtc-icon">üíù</span>
                    <span class="gtc-name">–°–µ—Ä–¥—Ü–µ</span>
                </div>
                <div class="gift-type-card" onclick="selectGiftType('crown', this)">
                    <span class="gtc-icon">üëë</span>
                    <span class="gtc-name">–ö–æ—Ä–æ–Ω–∞</span>
                </div>
            </div>
            <div class="form-group" id="giftAmountGroup" style="display:none;">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                <input type="number" id="giftAmount" placeholder="100" class="form-input" min="1">
            </div>
            <div class="form-group">
                <label>–ü–æ—Å–ª–∞–Ω–∏–µ –∫ –ø–æ–¥–∞—Ä–∫—É</label>
                <input type="text" id="giftMessage" placeholder="–° –ª—é–±–æ–≤—å—é! üíï" class="form-input">
            </div>
            <input type="hidden" id="giftType" value="">
            <button class="modal-btn" onclick="sendGift()">–ü–æ–¥–∞—Ä–∏—Ç—å üéÅ</button>
        </div>
    </div>

    <!-- Add Album Modal -->
    <div class="modal-overlay" id="addAlbumModal">
        <div class="modal modal-form">
            <button class="modal-close" onclick="closeAllModals()">‚úï</button>
            <h2>üì∏ –°–æ–∑–¥–∞—Ç—å –∞–ª—å–±–æ–º</h2>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∞–ª—å–±–æ–º–∞</label>
                <input type="text" id="albumTitle" placeholder="–ù–∞—à–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ..." class="form-input">
            </div>
            <div class="form-group">
                <label>–û–±–ª–æ–∂–∫–∞ (—ç–º–æ–¥–∑–∏)</label>
                <div class="emoji-picker">
                    <span class="ep-item" onclick="pickAlbumCover('üåÖ')">üåÖ</span>
                    <span class="ep-item" onclick="pickAlbumCover('üèñÔ∏è')">üèñÔ∏è</span>
                    <span class="ep-item" onclick="pickAlbumCover('üéÑ')">üéÑ</span>
                    <span class="ep-item" onclick="pickAlbumCover('üíë')">üíë</span>
                    <span class="ep-item" onclick="pickAlbumCover('üéÇ')">üéÇ</span>
                    <span class="ep-item" onclick="pickAlbumCover('‚úàÔ∏è')">‚úàÔ∏è</span>
                    <span class="ep-item" onclick="pickAlbumCover('üè†')">üè†</span>
                    <span class="ep-item" onclick="pickAlbumCover('üé°')">üé°</span>
                </div>
                <input type="hidden" id="albumCover" value="üíë">
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="albumDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∞–ª—å–±–æ–º–∞..." class="form-textarea"></textarea>
            </div>
            <button class="modal-btn" onclick="saveAlbum()">–°–æ–∑–¥–∞—Ç—å –∞–ª—å–±–æ–º üì∏</button>
        </div>
    </div>

    <!-- Add Photo Modal -->
    <div class="modal-overlay" id="addPhotoModal">
        <div class="modal modal-form">
            <button class="modal-close" onclick="closeAllModals()">‚úï</button>
            <h2>üì∑ –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</h2>
            <div class="form-group">
                <label>–ü–æ–¥–ø–∏—Å—å</label>
                <input type="text" id="photoCaption" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–º–µ–Ω—Ç–∞..." class="form-input">
            </div>
            <div class="form-group">
                <label>–≠–º–æ–¥–∑–∏ / –°—Ç–∏–∫–µ—Ä</label>
                <div class="emoji-picker">
                    <span class="ep-item" onclick="pickPhotoEmoji('üì∏')">üì∏</span>
                    <span class="ep-item" onclick="pickPhotoEmoji('ü•∞')">ü•∞</span>
                    <span class="ep-item" onclick="pickPhotoEmoji('üíï')">üíï</span>
                    <span class="ep-item" onclick="pickPhotoEmoji('üåÖ')">üåÖ</span>
                    <span class="ep-item" onclick="pickPhotoEmoji('ü§ó')">ü§ó</span>
                    <span class="ep-item" onclick="pickPhotoEmoji('üòò')">üòò</span>
                    <span class="ep-item" onclick="pickPhotoEmoji('üéâ')">üéâ</span>
                    <span class="ep-item" onclick="pickPhotoEmoji('üßÅ')">üßÅ</span>
                </div>
                <input type="hidden" id="photoEmoji" value="üì∏">
            </div>
            <button class="modal-btn" onclick="savePhoto()">–î–æ–±–∞–≤–∏—Ç—å üì∑</button>
        </div>
    </div>

    <!-- Add Balance Modal -->
    <div class="modal-overlay" id="addBalanceModal">
        <div class="modal modal-form">
            <button class="modal-close" onclick="closeAllModals()">‚úï</button>
            <h2>‚≠ê –î–æ–±–∞–≤–∏—Ç—å –∑–≤—ë–∑–¥—ã</h2>
            <div class="form-group">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤—ë–∑–¥</label>
                <input type="number" id="addBalanceAmount" placeholder="100" class="form-input" min="1">
            </div>
            <button class="modal-btn" onclick="addBalance()">–î–æ–±–∞–≤–∏—Ç—å ‚≠ê</button>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal-overlay" id="editProfileModal">
        <div class="modal modal-form">
            <button class="modal-close" onclick="closeAllModals()">‚úï</button>
            <h2>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h2>
            <div class="form-group">
                <label>–ò–º—è</label>
                <input type="text" id="editName" placeholder="–ò–º—è..." class="form-input">
            </div>
            <div class="form-group">
                <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π</label>
                <input type="date" id="editStartDate" class="form-input">
            </div>
            <div class="form-group">
                <label>–ê–≤–∞—Ç–∞—Ä</label>
                <div class="emoji-picker">
                    <span class="ep-item" onclick="pickProfileAvatar('üë∏')">üë∏</span>
                    <span class="ep-item" onclick="pickProfileAvatar('üßë')">üßë</span>
                    <span class="ep-item" onclick="pickProfileAvatar('üë©')">üë©</span>
                    <span class="ep-item" onclick="pickProfileAvatar('üíÉ')">üíÉ</span>
                    <span class="ep-item" onclick="pickProfileAvatar('ü¶Ñ')">ü¶Ñ</span>
                    <span class="ep-item" onclick="pickProfileAvatar('üê±')">üê±</span>
                    <span class="ep-item" onclick="pickProfileAvatar('üå∏')">üå∏</span>
                    <span class="ep-item" onclick="pickProfileAvatar('ü¶ã')">ü¶ã</span>
                </div>
                <input type="hidden" id="editAvatar" value="üë∏">
            </div>
            <button class="modal-btn" onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å üíï</button>
        </div>
    </div>

    <!-- Scripts -->
    <!-- JS: –ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω! -->
        <!-- Scripts (–ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω!) -->
    <script src="js/storage.js"></script>
    <script src="js/effects.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/letters.js"></script>
    <script src="js/gifts.js"></script>
    <script src="js/photos.js"></script>
    <script src="js/profile.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/features.js"></script>
    <script src="js/telegram.js"></script>
    <script src="js/app.js"></script>
</body>
</html>